!function(){"use strict";angular.module("qaCampus",["ngLodash"]).directive("qaCanvas",function(){function a(a,b,c){return b*c*4+4*a}function b(b,c){var d=c[0],e=d.getContext("2d"),f=d.width,g=d.height,h=e.getImageData(0,0,f,g).data;b.$watchCollection("pixels",function(b){var c=e.getImageData(0,0,f,g);c.data.set(h),b&&(b.forEach(function(b){var d=a(b.x,b.y,c.width);c.data[d]=b.r,c.data[d+1]=b.g,c.data[d+2]=b.b,c.data[d+3]=255}),e.putImageData(c,0,0))})}return{restrict:"E",replace:!0,scope:{pixels:"=",width:"@",height:"@"},template:'<canvas width="{{width}}" height="{{height}}"></canvas>',link:b}}).factory("MandelbrotService",["lodash",function(a){function b(b){return a.map(b,function(a,b){return b+"="+encodeURIComponent(a)}).join("&")}function c(c,g,h){function i(a){h&&console.info(a)}var j=null;g=a.defaults(a.pick(g,d),f),this.startNewCalculation=function(d){j&&(i("closing previous socket."),j.close()),d=a.pick(d,e),i("opening socket..."),j=new WebSocket(c+"?"+b(d)),j.onopen=function(){i("socket open.")},j.onmessage=function(a){var b;try{b=JSON.parse(a.data)}catch(c){return void console.error("unintelligible message received",a.data)}b.hasOwnProperty("rowAndColumnCount")?g.onSetup(b):g.onMessage(b)},j.onclose=function(a){var b=1e3;j=null,a.wasClean||a.code===b?(i("socket was closed cleanly."),g.onClose()):(console.error("socket was closed unexpectedly.",a.reason,"("+a.code+")"),g.onError(a.reason))}}}var d=["onSetup","onMessage","onClose","onError"],e=["width","pR","pI","extent","iterations"],f={onSetup:a.noop,onMessage:a.noop,onClose:a.noop,onError:a.noop};return c}])}();
//# sourceMappingURL=qa-campus.min.js.map